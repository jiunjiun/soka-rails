# frozen_string_literal: true

require 'rails_helper'

RSpec.describe <%= @agent_class_name %>Agent, type: :agent do
  let(:agent) { described_class.new }

  describe '#run' do
    before do
      # Mock AI response
      mock_ai_response(
        final_answer: 'Test response'
      )
    end

    it 'responds to queries' do
      result = agent.run('Test query')

      expect(result).to be_successful
      expect(result.final_answer).to eq('Test response')
    end

    it 'handles errors gracefully' do
      allow(agent).to receive(:execute).and_raise(StandardError, 'Test error')

      expect {
        agent.run('Test query')
      }.not_to raise_error
    end
  end
end
